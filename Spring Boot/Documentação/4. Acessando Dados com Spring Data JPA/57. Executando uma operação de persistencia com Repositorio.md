
# AutorRepository

## O que é um Repository no Spring Data JPA

Um **Repository** é uma interface que o Spring usa para **gerar automaticamente** uma implementação de acesso ao banco de dados.

Ao estender `JpaRepository`, você ganha métodos prontos como:
- `save`
- `findById`
- `findAll`
- `deleteById`

Sem escrever SQL ou implementação manual.

## AutorRepository extends JpaRepository`

### O que significa
```Java
public interface AutorRepository extends JpaRepository<Autor, UUID> { 
}
```

- `Autor` → entidade que será manipulada
- `UUID` → tipo da chave primária (`@Id`)

O Spring:
- Cria automaticamente um bean dessa interface
- Injeta o `EntityManager` internamente
- Traduz chamadas Java em SQL

## Por que a interface é vazia?

Mesmo sem métodos declarados, você já tem acesso a **CRUD completo**, porque o Spring Data fornece a implementação em tempo de execução.

# LivroRepository

## Papel da interface

```Java
public interface LivroRepository extends JpaRepository<Livro, UUID> { 
}
```

Ela funciona da mesma forma que o `AutorRepository`, mas agora para a entidade `Livro`.
Cada repositório:
- É fortemente tipado para uma entidade
- Controla apenas uma tabela/agregado

## Boa prática aplicada
- Um repositório por entidade
- Repositórios **não possuem regra de negócio**
- Apenas acesso a dados

# Alteração no `Application.java`

## Uso do `SpringApplication.run`

### O que acontece aqui

```Java
var context = SpringApplication.run(Application.class, args);
```
- Inicializa o Spring Boot
- Cria o **ApplicationContext**
- Registra todos os beans (controllers, services, repositories, etc.)

O `context` é o **container do Spring**, onde todos os beans vivem.

## Obtendo um bean manualmente

```Java
AutorRepository repository = context.getBean(AutorRepository.class);
```

Aqui você está:
- Pedindo ao Spring uma instância gerenciada de `AutorRepository`
- O Spring retorna o proxy JPA já configurado
- Não há `new` → o ciclo de vida é do Spring

Isso é **injeção manual via contexto**, usada apenas para testes ou bootstrap.

## Chamando um método de exemplo

```Java
exemploSalvarRegistro(repository);
```

Logo após subir a aplicação, esse método é executado automaticamente.
Isso é útil para:
- Testes iniciais
- Seeds de banco
- Demonstrações didáticas

# Método `exemploSalvarRegistro`

## Criação de uma entidade `Autor`

```Java
Autor autor = new Autor(); 
autor.setNome("José"); 
autor.setNacionalidade("Brasileira"); 
autor.setDataNascimento(LocalDate.of(1950, 1, 31));
```

Aqui ocorre:
- Instanciação normal de um objeto Java
- Preenchimento dos campos obrigatórios definidos na entidade

Ainda **não existe persistência** neste ponto.

## Salvando no banco com `save`

```Java
var autorSalvo = autorRepository.save(autor);
```

O método `save`:
- Verifica se o ID está vazio
- Gera automaticamente um UUID
- Executa um `INSERT` no banco
- Retorna a entidade já persistida

Após essa linha:
- O objeto possui ID
- O registro existe no banco

## Exibindo o resultado

```Java
System.out.println("Autor Salvo " + autorSalvo);
```

Como a entidade usa Lombok (`@Data`, `@Getter/@Setter`), o `toString()` é gerado automaticamente, facilitando a visualização do objeto salvo.